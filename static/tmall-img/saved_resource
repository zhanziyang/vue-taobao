define("mui/smart-jump/index",["mui/smart-jump/index.css","mui/zepto/touch","mui/fetch/jsonp"],function(e,t,a){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(){var e={},t=location.search.slice(1).split("&");if(t.length)for(var a=0;a<t.length;a++)if(t[a]&&t[a].indexOf("=")!=-1){var i=t[a].split("=");e[i[0]]=i[1]}return e}function o(e){return"string"==typeof e&&""!==e}function r(e){return decodeURIComponent(e.replace(/\+/g," "))}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}();e("mui/smart-jump/index.css");var u=e("mui/zepto/touch"),c=e("mui/fetch/jsonp"),d=window,p=document,m=864e5,_=window.localStorage,f=new Date,v=[f.getFullYear(),f.getMonth()+1,f.getDate()].join("-"),h=n(),k={"url":"//equity-vip.tmall.com/liuliangbao/track.do","wait_time":"1000"},b=navigator.userAgent||"",g=b.indexOf("AliApp(TM/")>=0,w=b.indexOf("AliApp")>=0||h.ttid&&h.ttid.indexOf("@juhuasuan")>=0,y=b.indexOf("AliApp(JU/")>=0,U=b.indexOf("AlipayClient")>=0,S=b.indexOf("AliApp(TB/")>=0,x=b.indexOf("AliTrip")>=0,A=b.indexOf("AliApp(BC")>=0,C=document.referrer&&document.referrer.indexOf("taobao.com")>=0,B=d.location.href.indexOf("ali_trackid=")>=0||p.cookie.match(/(?:^|\s)tkmb=([^;]+)(?:;|$)/),I=C&&!B,T=null!=b.match(/Chrome/i)&&null!=b.match(/Version\/\d+\.\d+(\.\d+)?\sChrome\//i),L=b.toLowerCase().indexOf("iphone os 9")>0,O=window.g_config||{},D=O.sbConfig||{};window.SB=window.SB||{},SB.getAPIData=function(){var e="unsent",t=[],a=[],i=void 0;return function(n,o){switch(e){case"unsent":e="sending",t.push(n),a.push(o),c(k.url,{"method":"jsonp","callback":"_sbCallback","body":"wfType=8&wfCode=777522&time=20160520110002&_mock_=true"}).then(function(e){return e.json()}).then(function(n){i=n,e="sent",a.map(function(e,a){"function"==typeof e&&e.call(t[a],i)}),a=[],t=[]});break;case"sending":t.push(n),a.push(o);break;case"sent":o.call(n,i)}}}();var P=function(){function e(t){i(this,e),this.listeners={},this.init(t)}return s(e,[{"key":"init","value":function(e){var t=this;if(e.mmstat=e.mmstat||e.type||"default",e.UIType||(e.UIType="default"),t.opt=e,!h||!h.disableSJ){var a=window.g_config||{};if(!a.removeSmartBanner)return this.safariVersion=this._getSafariVersion(),e.noUIButCall&&!t._defaultHideScene()?void SB.getAPIData(t,t._initSmartBanner):void(e.notNeedUI||t._defaultHideScene()||SB.getAPIData(t,t._initSmartBanner))}}},{"key":"appJump","value":function(e){var t=this,a=Object.assign(t.opt,e);a.utsk="third",t.safariVersion<9||!a.useULink?t._call({"url":t._spliceUrl(a)}):t.callWithUniversalLink()}},{"key":"callWithUniversalLink","value":function(){var t=this.opt,a=this._spliceUrl(t);this._sendParamsToSever(),window.location.href=e.UNIVERSAL_LINK+"?ul_redirect="+encodeURIComponent(a)+"&redirect="+encodeURIComponent(e.DOWNLOAD_URL)}},{"key":"_sendParamsToSever","value":function(){var e=this._spliceULDownloadParam();c("//mobile.tmall.com/mobile/api/deep_link_seed.do?"+e,{"method":"jsonp","callback":"callback","timeout":4e3})}},{"key":"_spliceULDownloadParam","value":function(){function e(e){return"string"==typeof e||"number"==typeof e}var t=this.opt,a="";Object.keys(t).map(function(i){e(t[i])&&(a+=i+"="+encodeURIComponent(t[i])+"&"),"params"===i&&!function(){var i=t.params;Object.keys(i).map(function(t){e(i[t])&&(a+=t+"="+encodeURIComponent(i[t])+"&")})}()}),a=a.slice(0,a.length-1);var i="src=universallink";return~a.indexOf("downloadSrc")?a=a.replace(/downloadSrc=[^&]+/,i):a+="&"+i,a+=""+this._getFlowParam()+this._getDlttid()}},{"key":"_initSmartBanner","value":function(e){var t=this;if(e.delta){var a=JSON.parse(e.delta);t.delta=a,t.track=e.track,t.track&&(t.opt.scene="liuliangbao"),t._initDefaultEvent(),t._autoApp(a),t.opt.noUIButCall||t._renderDom(a)}}},{"key":"_autoApp","value":function(e){var t=this,a=t.opt,i={};a.utsk="auto",t.autoUrl=t._spliceUrl(a);var n=!1;if(e&&e.data&&e.data[0]){i=e.data[0];var o=t._invokeFatigue();if(+o>=+i.fatigue)return;if(t._invokeFatigue(+o+1),"true"==i.bottom_auto&&"default"==a.UIType?n=!0:"true"==i.box_auto&&"box"==a.UIType?n=!0:"true"==i.button_auto&&"button"==a.UIType&&(n=!0),n&&!window.SB.auto){if(t._autoHideScene(a.UIType,i))return;window.SB.auto=!0,i.click_default_url&&"default"==a.UIType&&(t.autoLink=t._spliceUrl({"utsk":"auto","type":"link","params":{"url":i.auto_default_url}})),i.click_box_url&&"box"==a.UIType&&(t.autoLink=t._spliceUrl({"utsk":"auto","type":"link","params":{"url":i.auto_box_url}})),t._call({"url":t.autoLink||t.autoUrl,"isAuto":!0},i)}}}},{"key":"_defaultHideScene","value":function(){var e=navigator.userAgent.indexOf("MI PAD")>=0,t=b.indexOf("ipad")>-1,a=g||e||t;return a}},{"key":"_autoHideScene","value":function(e,t){function a(a){var i=void 0,n=void 0;return"default"==e&&"true"==t["auto_open_default_"+a]?i=!0:"box"==e&&"true"==t["auto_open_box_"+a]&&(n=!0),!(i||n)}t=t||{};var i=this,n=void 0,o=void 0,r=void 0,l=void 0,s=void 0,u=void 0,c=void 0,d=void 0,p=void 0,m=void 0;o=S&&a("tb"),r=U&&a("pay"),l=y&&a("ju"),s=A&&a("bc"),u=I&&a("refer"),c=B&&a("tbk"),d=T&&"true"==t.auto_close_andriodWeb,n=L&&a("aboveIOS9"),m=t.auto_hide_ua||"HTAO|HTao|alihealthclient|AliHealthClient|ALICAR|Car|AliTrip|AliApp\\(IS",!!m&&(p=null!=b.match(new RegExp(m)));var _=!1;if(B){if(i._isMatchUA(b,t.auto_tbk_white_ua||""))return!1;if(i._isMatchUA(b,t.auto_tbk_black_ua||""))return!0;_="true"!=t.auto_tbk_other_ua}else{if(i._isMatchUA(b,t.auto_white_ua||""))return!1;if(i._isMatchUA(b,t.auto_black_ua||""))return!0;_="true"!=t.auto_other_ua}var f=_||n||o||r||l||s||u||c||p||D.hideAuto||d;return f}},{"key":"_showHideScene","value":function(e,t){function a(a,i){var n=void 0,o=void 0;return i?"default"==e&&"false"==t["show_close_default_"+a]?n=!0:"box"==e&&"false"==t["show_close_box_"+a]&&(o=!0):"default"==e&&"true"==t["show_open_default_"+a]?n=!0:"box"==e&&"true"==t["show_open_box_"+a]&&(o=!0),!(n||o)}t=t||{};var i=this,n=void 0,o=void 0,r=void 0,l=void 0,s=void 0,u=void 0,c=void 0,d="default"==e&&i.getCookie("_smartbannerBottomCloseBtn_"),p="box"==e&&i.getCookie("_smartbannerBoxCloseBtn_"),m=window.innerWidth&&window.innerWidth>window.innerHeight||!1,_=d||p||"button"!=e&&m;n=L&&a("aboveIOS9"),o=S&&a("tb"),r=y&&a("ju"),l=I&&a("refer"),s=B&&a("tbk","close"),c=t.show_hide_ua||"alihealthclient|AliHealthClient|AliApp\\(IS",c&&(u=null!=b.match(new RegExp(c)));var f=!1;if(B){if(i._isMatchUA(b,t.show_tbk_white_ua||""))return!1;if(i._isMatchUA(b,t.show_tbk_black_ua||""))return!0;f="true"!=t.show_tbk_other_ua}else{if(i._isMatchUA(b,t.show_white_ua||""))return!1;if(i._isMatchUA(b,t.show_black_ua||""))return!0;f="true"!=t.show_other_ua}var v=f||n||o||r||l||s||u||_||D.hideShow;return v}},{"key":"_renderDom","value":function(t){function a(){n._sendLog({"string":"tmwap.1.3","apuri":"sb_show"})}var i=this,n=this,o=n.opt,r={},s="";if(o.utsk="click",n.sbUrl=n._spliceUrl(o),t&&t.data&&t.data[0]){var c=function(){if(r=t.data[0],"box"==o.UIType&&"true"==r.p_cookie_set?o.setCookie=!0:"default"==o.UIType&&"true"==r.b_cookie_set&&(o.setCookie=!0),o.img&&(r.content=o.img),r.logo_pic||(r.logo_pic="//img.alicdn.com/tps/TB1twKDJFXXXXbtXVXXXXXXXXXX-92-92.png"),r.click_default_url&&"default"==o.UIType&&(n.sbLink=n._spliceUrl({"utsk":"click","type":"link","params":{"url":r.click_default_url}})),r.click_box_url&&"box"==o.UIType&&(n.sbLink=n._spliceUrl({"utsk":"click","type":"link","params":{"url":r.click_box_url}})),r.button_words||(r.button_words="\u524d\u5f80 App"),n._showHideScene(o.UIType,r))return{"v":void 0};var l=10===+i.safariVersion,c=e.UNIVERSAL_LINK+"?ul_redirect="+encodeURIComponent(n.sbUrl)+"&redirect="+encodeURIComponent(e.DOWNLOAD_URL);switch(o.UIType){case"default":if(s='<div id="J_BottomSmartBanner" class="mui-bottom-smart-banner">\n              <a id="J_BottomSmartBannerLink" '+(l?'href="'+c+'"':"")+'>\n                <img src="'+r.content+'">\n              </a>\n              <div class="mui-bottom-m-sb-btn-close" id="J_BottomSmartBannerClose" role="button" aria-label="\u5173\u95ed" tabindex="0"></div>\n            </div>',u("#J_BottomSmartBanner").length>0)return{"v":void 0};u("body")?(u("body").append(s),l&&(u("#J_BottomSmartBannerLink").get(0).onclick=n._sendParamsToSever.bind(n))):setTimeout(function(){u("body").append(s),l&&(u("#J_BottomSmartBannerLink").get(0).onclick=n._sendParamsToSever.bind(n))},0);break;case"box":s='<div class="mui-sb-box">\n              <div class="close" id="J_SBBoxClose" role="button" aria-label="\u5173\u95ed" tabindex="0"></div>\n              '+(l?'<a href="'+c+'">':"")+'\n                <img class="logo" src="'+r.logo_pic+'" width="42" height="42"/>\n                <div class="words">'+r.pic_words+'</div>\n                <div class="arrow"></div>\n              '+(l?"</a>":"")+"\n            </div>",u(o.triggle).append(s),l&&(u(".mui-sb-box").get(0).onclick=n._sendParamsToSever.bind(n)),!!o.showCallback&&o.showCallback();break;case"button":s='<div class="mui-sb-button">\n              '+(l?'<a href="'+c+'">':"")+'\n                <img class="logo" src="'+r.logo_pic+'" width="42" height="42"/>\n                <div class="words">'+r.button_words+'</div>\n                <div class="arrow"></div>\n              '+(l?"</a>":"")+"\n            </div>",u(o.triggle).append(s),l&&(u(".mui-sb-button").get(0).onclick=n._sendParamsToSever.bind(n)),!!o.showCallback&&o.showCallback()}a(),!!r.exposureParam&&((new Image).src=r.exposureParam+"&r"+ +new Date+"=1"),n._initSBEvent(r)}();if("object"===("undefined"==typeof c?"undefined":l(c)))return c.v}}},{"key":"_initSBEvent","value":function(e){var t=this,a=t.opt,i="",n=a.triggle?a.triggle:"#J_BottomSmartBanner",o="";"default"==a.UIType?(o="J_BottomSmartBannerClose",i="_smartbannerBottomCloseBtn_"):"box"==a.UIType&&(o="J_SBBoxClose",i="_smartbannerBoxCloseBtn_");var r=10===+this.safariVersion;if(!r){var l=this.listeners.tap=function(a){if(a.target.id!=o){var i=t.sbLink||t.sbUrl;return t.safariVersion<9?t._call({"url":i,"isClick":!0},e):t.callWithUniversalLink(),!1}};u(document).on("tap",n,l)}if(o){var s=this.listeners.close=function(e){return e.preventDefault(),t._sendLog({"string":"tmwap.1.4","apuri":"sb_click_close"}),u(n).hide(),!!a.closeBtnCallback&&a.closeBtnCallback(),a.setCookie&&t.setCookie(i,1,void 0,".tmall.com","/"),!1};u(document).on("tap","#"+o,s);var c=this.listeners.preventPierce=function(e){return e.preventDefault(),e.stopPropagation(),!1};u(document).on("touchstart","#"+o,c)}}},{"key":"setCookie","value":function(e,t,a,i,n,r,l){var s=void 0,u=a;s=l?String(t):String(encodeURIComponent(t)),"number"==typeof u&&(u=new Date,u.setTime(u.getTime()+a*m)),u instanceof Date&&(s+="; expires="+u.toUTCString()),o(i)&&(s+="; domain="+i),o(n)&&(s+="; path="+n),r&&(s+="; secure"),p.cookie=e+"="+s}},{"key":"getCookie","value":function(e){var t=void 0,a=void 0;return o(e)&&(a=String(p.cookie).match(new RegExp("(?:^| )"+e+"(?:(?:=([^;]*))|;|$)")))&&(t=a[1]?r(a[1]):""),t}},{"key":"hide","value":function(){var e=this,t=e.opt,a=t.triggle?t.triggle:"#J_BottomSmartBanner",i=u(a);!!i&&u(i).hide()}},{"key":"show","value":function(){var e=this,t=e.opt,a=t.triggle?t.triggle:"#J_BottomSmartBanner",i=u(a);!!i&&u(i).show()}},{"key":"destroy","value":function(){var e=this,t=this.opt;if(!t.notNeedUI){var a=t.triggle?t.triggle:"#J_BottomSmartBanner",i=u(a),n=void 0;"default"==t.UIType?n="J_BottomSmartBannerClose":"box"==t.UIType&&(n="J_SBBoxClose"),i.remove(),Object.keys(this.listeners).map(function(t){switch(t){case"tap":u(document).off("tap",a,e.listeners.tap);break;case"close":u(document).off("tap","#"+n,e.listeners.close);break;case"preventPierce":u(document).off("touchstart","#"+n,e.listeners.preventPierce)}})}}},{"key":"_spliceUrl","value":function(e){var t=this,a=e.type||"",i=e.params||"",n="";if(a)switch(a){case"detail":t.page="detail",n="tmall://page.tm/itemDetail?"+t._param(i);break;case"shop":t.page="shop",n="tmall://page.tm/shop?"+t._param(i);break;case"list":t.page="list",n="tmall://page.tm/search?searchType=item&"+t._param(i);break;case"internal":i.page?(t.page=i.page,n=" tmall://page.tm/"+i.page+(i.params?"?"+t._param(i.params):"")):i.url&&(n=i.url);break;case"link":t.page="h5",n=i.url,n.indexOf("#")>-1&&(n=n.replace(/#(.*?)$/,"")),n="tmall://page.tm/webview?url="+encodeURIComponent(n);break;default:n="tmall://tab.switch/home"}else n="tmall://tab.switch/home";t._getTkmd()&&(n+=(n.indexOf("?")>-1?"&":"?")+t._getTkmd()),t.track&&(n+=(n.indexOf("?")>-1?"&":"?")+t.track);var o=t._spliceUtsk();return n+=(n.indexOf("?")>-1?"&":"?")+o}},{"key":"_param","value":function(e){var t="";e=e||{};var a=0;for(var i in e)a&&(t+="&"),e[i]&&(t=t+i+"="+e[i],a=1);return t}},{"key":"_getTkmd","value":function(){var e=p.cookie.match(/(?:^|\s)tkmb=([^;]+)(?:;|$)/),t="";if(e){var a=e[1],i=/(?:^|&)e=(.*?)(?:&|$)/.test(a)?encodeURIComponent(RegExp.$1):"",n=/(?:^|&)tkFlag=(.*?)(?:&|$)/.test(a)?encodeURIComponent(RegExp.$1):"";t="e="+i+"&type=2&tkFlag="+n}return t}},{"key":"_spliceUtsk","value":function(){var e=this,t=e.opt,a={"a":t.utskA||"3","b":+new Date,"c":e._getUtskC(),"d":(t.utsk?t.utsk+"-":"third-")+t.mmstat+"-"+(B?"1":"0")};return"_ns=1&ut_sk="+a.a+"."+a.b+"."+a.c+"."+a.d}},{"key":"_getUtskC","value":function(){var e="other",t=b.indexOf("Weibo")>=0,a=b.indexOf("UCBrowser")>=0&&!w,i=b.indexOf("QQBrowser")>=0;return S?e="tb":y?e="ju":U?e="alipay":x?e="alitrip":t?e="weibo":a?e="uc":i?e="qq":A?e="bc":w&&(e="aliapp"),e+=this.safariVersion<9?"":"_iOS9"}},{"key":"_judgePlatform","value":function(){var e=this,t=navigator.standalone;return null!=b.match(/iPhone|iPod|iPad/i)?(e.platform="ios",e.isIpad=null!=b.match(/iPad/i)):null!=b.match(/Android/i)?null!=b.match(/Mobile/i)&&(e.platform="android",e.isChrome=null!=b.match(/Chrome/i)&&null==b.match(/Version\/\d+\.\d+(\.\d+)?\sChrome\//i)):null!=b.match(/Linux/i)&&(e.platform="android"),!(!e.platform||t)||(e.invaliable=!0,!1)}},{"key":"_initDefaultEvent","value":function(){var e=this;window.addEventListener("blur",function(){e.timeload&&(clearTimeout(e.timeload),e.timeload=null)}),document.addEventListener("visibilitychange",function(){if(document.hidden){if(!e.timeload)return;clearTimeout(e.timeload),e.timeload=null}})}},{"key":"_call","value":function(e,t){var a=this,i=a.opt,n=Date.now();a._judgePlatform()&&(e.isAuto?(a._sendLog({"string":"tmallacti.201503.1005.5","apuri":"sb_auto_envoke"}),"ios"==a.platform?a._sendLog({"string":"tmallacti.201503.1005.1","apuri":"sb_ios_auto_envoke"}):a._sendLog({"string":"tmallacti.201503.1005.3","apuri":"sb_andriod_auto_envoke"})):(a._sendLog({"string":"tmwap.1.8","apuri":"sb_click"}),"ios"==a.platform?a._sendLog({"string":"tmwap.1.5","apuri":"sb_ios_click"}):a._sendLog({"string":"tmwap.1.6","apuri":"sb_andriod_click"})),a.timeload&&clearTimeout(a.timeload),a.timeload=setTimeout(function(){var o=Date.now();clearTimeout(a.timeload),a.timeload=null,o-n<k.wait_time+50?(e.isAuto?"ios"==a.platform?a._sendLog({"string":"tmallacti.201503.1005.2","apuri":"sb_ios_auto_fail"}):a._sendLog({"string":"tmallacti.201503.1005.4","apuri":"sb_andriod_auto_fail"}):"ios"==a.platform?a._sendLog({"string":"tmwap.1.2","apuri":"sb_ios_click_fail"}):a._sendLog({"string":"tmwap.1.7","apuri":"sb_andriod_click_fail"}),!!i.fail&&i.fail(),i.notGoDownload||e.isAuto||a._download(t)):!!i.success&&i.success()},k.wait_time),a._redirect(e))}},{"key":"_getSafariVersion","value":function(){var e="",t=navigator.userAgent.toLowerCase(),a=[];return t.match(/safari/)&&(a=t.match(/version\/([\d\.]+)/),a&&(e=a[1],e&&(e=e.split(".")[0]))),e||-1}},{"key":"_redirect","value":function(e){var t=this,a=e.url||"",i=this.safariVersion;if(i>=9)window.location.href=a;else if(t.isChrome){var n=a.split("://"),o=n[0],r=a.replace(o+"://","");a="intent://"+r+"#Intent;scheme="+o+";package=com.tmall.wireless;end";var l=window.open(a);e.isClick&&(l.location.href="http://m.laiwang.com/market/laiwang/tmall/app-download.php?src="+(t.opt.downloadSrc?t.opt.downloadSrc:"wapicon"))}else!function(){var e=document.createElement("iframe");e.style.display="none",e.src=a,document.body?document.body.appendChild(e):setTimeout(function(){document.body.appendChild(e)},0)}()}},{"key":"_spliceDownloadUrl","value":function(e){var t=this,a=t.opt,i="";return i="http://m.laiwang.com/market/laiwang/tmall/app-download.php?needCall=0&src="+(a.downloadSrc?a.downloadSrc:"wapicon"),i+=""+this._getDlttid()+this._getFlowParam(),a&&a.type&&a.key&&(i=i+"&type="+a.type+"&key="+a.key),i}},{"key":"_getDlttid","value":function(){var e=this.delta;if(e&&e.tApp_white_list){var t=this._MatchUA(navigator.userAgent,e.tApp_white_list);if(t)return"&dlttid="+t}return""}},{"key":"_getFlowParam","value":function(){return h&&h.asac&&h.lpt&&h.lsid&&h.lpid?"&asac="+h.asac+"&lpt="+h.lpt+"&lsid="+h.lsid+"&lpid="+h.lpid:""}},{"key":"_download","value":function(e){var t=this._spliceDownloadUrl(e);window.location.href=t}},{"key":"_MatchUA","value":function(e,t){var a=(t||"").split("|"),i="";return u(a).each(function(t,a){a&&e.indexOf(a)!==-1&&(i=a)}),i}},{"key":"_isMatchUA","value":function(e,t){var a=(t||"").split("|"),i=!1;return u(a).each(function(t,a){a&&e.indexOf(a)!==-1&&(i=!0)}),i}},{"key":"_invokeFatigue","value":function(e){var t=void 0;if(!_)return 0;if(arguments.length)try{_.setItem("_SMARTBANNER_INVOKE_FATIGUE_"+v,e)}catch(a){}else try{t=parseInt(_.getItem("_SMARTBANNER_INVOKE_FATIGUE_"+v))||0}catch(a){}return t}},{"key":"_sendLog","value":function(e){var t=this,a=t.opt,i="",n={};if(e&&e.string){e.apuri&&(n.apuri=e.apuri),a.scene&&(n.scene=a.scene),a.mmstat&&(n.mmstat=a.mmstat),n.ui=a.UIType?a.UIType:"",n.r=+new Date;var o=[];for(var r in n)o.push(r+"="+encodeURIComponent(n[r]));i="//wgo.mmstat.com/"+e.string+"?"+o.join("&"),(new Image).src=i}}}]),e}();P.UNIVERSAL_LINK="//mobile.tmall.com/universal",P.DOWNLOAD_URL="//itunes.apple.com/cn/app/id518966501?mt=8",a.exports=P});define("mui/app-download-popup/index",["mui/app-download-popup/env","mui/app-download-popup/util","mui/smart-jump/index","mui/fetch/jsonp","mui/zepto/zepto","mui/datalazyload/","mui/crossimage/","mui/app-download-popup/index.css"],function(t,a,e){"use strict";function o(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,a){for(var e=0;e<a.length;e++){var o=a[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(a,e,o){return e&&t(a.prototype,e),o&&t(a,o),a}}(),l=t("mui/app-download-popup/env"),p=t("mui/app-download-popup/util"),u=t("mui/smart-jump/index"),s=(t("mui/fetch/jsonp"),t("mui/zepto/zepto")),r=(t("mui/zepto/zepto"),t("mui/datalazyload/")),d=t("mui/crossimage/"),c=r.instance(),_=(t("mui/app-download-popup/index.css"),document,new Date),m=[_.getFullYear(),_.getMonth()+1,_.getDate()].join("-"),h=window.localStorage,f=['<div class="app-download-popup" data-spm="app-download-popup">','<div class="app-download-popup-inner">','<i class="btn-close" role="button" aria-label="\u5173\u95ed" tabindex="0"></i>','<img class="banner">','<div class="btn-wrapper">','<a class="btn-download"></a>',"</div>",'<div class="btn-wrapper">','<div class="btn-hide"></div>',"</div>","</div>","</div>"],v={"banner":function(t,a){a&&(s("img.banner",t.el).attr("data-ks-lazyload",a),c.addStartListener(d.DatalazyPlugin(t.el)),c.addElements(t.el))},"small_banner":function(t,a){a&&(s("img.banner",t.el).attr("data-ks-lazyload",a),c.addStartListener(d.DatalazyPlugin(t.el)),c.addElements(t.el))},"bg_img":function(t,a){a&&(a=d.getFitUrl(a,void 0,void 0,{"enableAutoFormat":!0}),s(".app-download-popup-inner",t.el).css({"background-image":'url("'+a+'")',"background-position":"center center"}))},"download_text":function(t,a){s(".btn-download",t.el).text(a)},"continue_text":function(t,a){s(".btn-hide",t.el).text(a)},"is_small":function(t,a){s(t.el)[p.parseBoolean(a)?"addClass":"removeClass"]("smally"),p.parseBoolean(a)&&(s(".btn-wrapper",t.el).addClass("hidden-btn"),s(".btn-wrapper",t.el).eq(0).addClass("top"),s(".btn-wrapper",t.el).eq(1).addClass("bottom"))},"download_url":function(t,a){s(".btn-download",t.el).attr("href",a)}},k={"download_url":"//www.tmall.com/wow/portal/act/app-download","invoke_fatigue":-1,"popup_fatigue":-1,"download_text":"\u7acb\u5373\u4e0b\u8f7d","continue_text":"\u7ee7\u7eed\u6d4f\u89c8","is_small":!1,"bg_img":"","banner":"","tk_ua_list_unpopup":"","tk_ua_list_popup":"","tk_ua_list_uninvoke":"","tk_ua_list_invoke":"","tk_ua_other_invoke":!1,"tk_ua_other_popup":!1,"ua_list_unpopup":"","ua_list_popup":"","ua_list_uninvoke":"","ua_list_invoke":"","ua_other_invoke":!1,"ua_other_popup":!1,"continue_callback":null,"invoke_fatigue_callback":null,"popup_fatigue_callback":null,"dpr":""},b=function(){var t={},a=location.search.slice(1).split("&");if(a.length)for(var e=0;e<a.length;e++)if(a[e]&&a[e].indexOf("=")!=-1){var o=a[e].split("=");t[o[0]]=o[1]}return t},g=b(),w=function(){function t(a){o(this,t),this.init(a)}return i(t,[{"key":"init","value":function(t){var a=this;this.el=s(f.join("")),t=a.opts=s.extend(k,t||{}),t.dpr&&this.el.addClass("app-download-popup"+t.dpr),Object.keys(v).forEach(function(e){void 0!==n(t[e])&&(g&&g.is_small&&("1"===g.is_small?t.is_small="true":"0"===g.is_small&&(t.is_small="false")),"true"===t.is_small?(delete t.banner,v[e](a,t[e])):(delete t.small_banner,v[e](a,t[e])))}),s("body").append(a.el),s(".btn-download",a.el).on("click",function(){a.download()}),s(".btn-hide",a.el).on("click",function(){a.hide()}),s(".btn-close",a.el).on("click",function(){a.hide()});var e=s(".app-download-popup-inner",a.el)[0];s(a.el).on("touchmove",function(t){e.scrollHeight<=e.clientHeight&&t.preventDefault()});var o=!1,i=!1;l.isAliTrack?(o=!p.isMatchUA(l.ua,t.tk_ua_list_unpopup)&&(!!p.isMatchUA(l.ua,t.tk_ua_list_popup)||p.parseBoolean(t.tk_ua_other_popup)),i=!p.isMatchUA(l.ua,t.tk_ua_list_uninvoke)&&(!!p.isMatchUA(l.ua,t.tk_ua_list_invoke)||p.parseBoolean(t.tk_ua_other_invoke))):(o=!p.isMatchUA(l.ua,t.ua_list_unpopup)&&(!!p.isMatchUA(l.ua,t.ua_list_popup)||p.parseBoolean(t.ua_other_popup)),i=!p.isMatchUA(l.ua,t.ua_list_uninvoke)&&(!!p.isMatchUA(l.ua,t.ua_list_invoke)||p.parseBoolean(t.ua_other_invoke))),o&&a.show(),i&&a.invoke()}},{"key":"option","value":function(t,a){return 1===arguments.length?this.opts[t]:void(v[t]&&v[t](this,a))}},{"key":"popupFatigue","value":function(t){return h?arguments.length?void h.setItem("_APP_DOWNLOAD_POPUP_POPUP_FATIGUE_"+m,t):parseInt(h.getItem("_APP_DOWNLOAD_POPUP_POPUP_FATIGUE_"+m))||0:0}},{"key":"invokeFatigue","value":function(t){return h?arguments.length?void h.setItem("_APP_DOWNLOAD_POPUP_INVOKE_FATIGUE_"+m,t):parseInt(h.getItem("_APP_DOWNLOAD_POPUP_INVOKE_FATIGUE_"+m))||0:0}},{"key":"show","value":function(){var t=this.opts,a=parseInt(t.popup_fatigue)||0,e=this.popupFatigue();return a===-1||a>e?(this.el.addClass("show"),p.mmstat("tmallacti.1003.1219.1",t.mmstat),this.popupFatigue(e+1)):this.opts.popup_fatigue_callback&&this.opts.popup_fatigue_callback(),this}},{"key":"invoke","value":function(){var t=this.opts,a=parseInt(t.invoke_fatigue)||0,e=this.invokeFatigue();if(a===-1||a>e){var o={"utskA":"4","type":t.type,"params":t.params,"notGoDownload":!0,"notNeedUI":!0,"mmstat":t.mmstat,"fail":function(){}},n=new u(o);n.appJump(o),this.invokeFatigue(e+1)}else this.opts.invoke_fatigue_callback&&this.opts.invoke_fatigue_callback();return this}},{"key":"download","value":function(){return p.mmstat("tmallacti.1003.1219.2",this.opts.mmstat),this}},{"key":"hide","value":function(){return this.el.hide(),p.mmstat("tmallacti.1003.1219.3",this.opts.mmstat),this.opts.continue_callback&&this.opts.continue_callback(),this}},{"key":"close","value":function(){return this.el.hide(),p.mmstat("tmallacti.1003.1219.4",this.opts.mmstat),this}},{"key":"destroy","value":function(){this.el&&this.el.remove(),this.el=null}}]),t}();e.exports=w});define("mui/app-download-popup/env",["mui/tengine-detector/index","mui/app-download-popup/util"],function(i,e,t){"use strict";var a=i("mui/tengine-detector/index"),n=i("mui/app-download-popup/util"),o=window,p=(document,o.navigator.userAgent),d=a.os,s=n.getParam(o.location.search.replace("?","")),u=/AliApp\(BC/.test(p);t.exports={"ua":p,"mmstat":s.mmstat,"isIOS":"ios"===d.name,"isAndroid":"android"===d.name,"isAliTrack":"ali_trackid"in s,"isBC":u,"isAli":/AliApp\(/.test(p)&&!u}});define("mui/tengine-detector/index",function(e,a,o){"use strict";var t=[{name:"$detector_type",defaultValue:"pc",greedyValue:["android"],ruleValue:{" pad":"tablet","-pad":"tablet",tablet:"tablet",ipad:"tablet",kindle:"tablet",armbjs:"tablet","hp slatebook 10":"tablet","slate 21":"tablet",transformer:"tablet",playbook:"tablet","rim tablet":"tablet",htc_flyer_p512:"tablet","tc flyer":"tablet",xoom:"tablet",ideatab:"tablet",ideapad:"tablet",mediapad:"tablet",touchpad:"tablet","hm note 1w":"tablet",sholest:"tablet","silk-accelerated":"tablet","-pd/":"tablet","gt-n5100":"tablet","gt-n5110":"tablet","gt-n8000":"tablet","gt-n8010":"tablet","gt-p3100":"tablet","gt-p6800":"tablet","gt-p5110":"tablet","gt-p5210":"tablet","lenovo a3000":"tablet","lg-v500":"tablet","nexus 7":"tablet","p98 3g":"tablet",ramosi9:"tablet","sm-p600":"tablet","sm-p601":"tablet","sm-t110":"tablet","sm-t210":"tablet","sm-t211":"tablet","sm-t310":"tablet","sm-t311":"tablet","sm-t320":"tablet","sm-t321":"tablet","sm-t520":"tablet","sm-t700":"tablet","sm-t705":"tablet","sm-t800":"tablet","sm-t805":"tablet",v703:"tablet",v719:"tablet",v819:"tablet",v919:"tablet","x98 3g":"tablet","venue 7":"tablet",android:"phone","mobile ":"phone","aliapp(":"phone",tizen:"phone",iphone:"phone",iph:"phone",ipod:"phone",symbianos:"phone","windows ce":"phone","windows phone":"phone",meizu:"phone",_td:"phone",cucc:"phone",series60:"phone","windows mobile":"phone","opera mobi":"phone","opera mini":"phone",blackberry:"phone"," bb":"phone",sonyericsson:"phone",moto:"phone",j2me:"phone","samsung sm-z130h":"phone"}},{name:"$detector_app",defaultValue:"NA",greedyValue:["aliapp"],ruleValue:{weibo:"weibo","aliapp(dingtalk":"dingtalk","aliapp(lw":"lw","aliapp(et":"et","aliapp(dd":"dd","aliapp(tb":"tb","aliapp(tb-pd":"tb-pd","aliapp(tm":"tm","aliapp(tm-pd":"tm-pd","aliapp(am":"am","aliapp(ae":"ae","aliapp(lx":"lx","aliapp(ju":"ju","aliapp(ap":"ap","aliapp(fm":"fm","aliapp(wx":"wx","aliapp(xm":"xm","aliapp(qn":"qn","aliapp(cp":"cp","aliapp(ea":"ea","aliapp(1688":"1688"}},{name:"$detector_browser",defaultValue:"NA",greedyValue:["trident","ipad","safari","version","chrome"],ruleValue:{edge:"edge",trident:"ie",iemobile:"ie_mobile","ie ":"ie","rv ":"ie","rv:":"ie"," uc":"uc",theworld:"TheWorld",ucbrowser:"uc",dolfin:"Dolfin",opera:"opera",oupeng:"opera",firefox:"ff",micromessenger:"wechat",taobrowser:"TaoBrowser",mqqbrowser:"MQQBrowser",baiduhd:"BaiduHD",maxthon:"maxthon",yabrowser:"yandex",mxbrowser:"maxthon",flyflow:"FlyFlow",windvane:"WindVane",qt:"Qt"," ubrowser":"UBrowser",phantomjs:"PhantomJS",baidubrowser:"baidu"," lebrowser":"LeBrowser",miuibrowser:"MiuiBrowser",bidubrowser:"BIDUBrowser",nokiabrowser:"nokia",blackberry:"blackberry",rim:"blackberry"," bb10 ":"blackberry","se ":"sougou",sogoumse:"sougou",sogoumobilebrowser:"sougou","360 aphone browser":"360","360se":"360","360ee":"360","360chrome":"360","360browser":"360",lbbrowser:"liebao",liebaofast:"liebao",liebao:"liebao",qqbrowser:"QQBrowser",tencenttraveler:"tt",greenbrowser:"green",chrome:"chrome","crios/":"chrome"," android ":"android_webkit"," android/":"android_webkit",";android ":"android_webkit","ipad os":"ipad_safari","cpu os":"safari","cpu iphone os":"safari",version:"safari"}},{name:"$detector_engine",defaultValue:"NA",greedyValue:["gecko"],ruleValue:{"rv ":"trident","rv:":"trident","msie ":"trident"," ie ":"trident","(ie ":"trident",applewebkit:"webkit","gecko/":"gecko",presto:"presto",androidwebkit:"androidwebkit",coolpadwebkit:"coolpadwebkit"," u2/":"u2"," u3/":"u3",alireactnative:"reactnative",weex:"weex"}},{name:"$detector_os",defaultValue:"NA",greedyValue:["mac"],ruleValue:{"windows nt":"windows",win32:"windows","windows ce":"wp",xblwp:"wp",zunewp:"wp","windows phone os":"wp","windows phone":"wp","windows nt 6.2; arm;":"wp","windows nt 6.3; arm;":"wp",xblwp7:"wp",zunewp7:"wp",windows:"windows","macintosh; intel mac os x":"macos","macintosh; u; intel mac os x;":"macos","macintosh; amd mac os x":"macos","android ":"android",";android":"android"," android/":"android"," adr":"android","iphone os":"ios","cpu os":"ios","iph os":"ios",ipod:"ios"," ios ":"ios",webos:"webos",aliyunos:"yunos",symbian:"symbian","cros i686 ":"chromeos",hpwos:"webos",linux:"linux"," x11":"linux",blackberry:"blackberry",rim:"blackberry",bb10:"blackberry",nuhk:"robot","googlebot/":"robot","googlebot-image":"robot",yammybot:"robot",openbot:"robot",slurp:"robot",msnbot:"robot","ask jeeves/teoma":"robot",ia_archiver:"robot",baiduspider:"robot","bingbot/":"robot"}},{name:"$detector_device",defaultValue:"NA",greedyValue:["micromessenger"],ruleValue:{"intel mac os x":"mac",samsung:"samsung","gt-":"samsung","sgh-":"samsung","sm-":"samsung","sch-":"samsung"," mi-":"xiaomi"," mi ":"xiaomi"," mt":"sonyericsson"," hm":"hongmi",aliyunos:"aliyunos"," mx1":"meizu"," mx2":"meizu"," mx3":"meizu"," mx4":"meizu"," m040":"meizu"," m030":"meizu",meizu:"meizu",huawei:"huawei","zte-":"zte","-zte":"zte",zteu:"zte"," zte ":"zte",lenovo:"lenovo",coolpad:"coolpad",silk:"amazon",vivo:"vivo",oppo:"oppo",konka:"konka",iphone:"iphone",ipod:"iphone",iph:"iphone",ipad:"ipad",nokia:"nokia",noain:"noain","nexus ":"nexus",htc:"htc"," lg":"lg",blackberry:"blackberry",rim:"blackberry"," bb10 ":"blackberry","dell ":"dell",motorola:"motorola",droidx:"motorola","droid bionic":"motorola",xoom:"motorola",sonyst:"sony",sonylt:"sony",sonyericsson:"sony",smartisan:"smartisan"}}];var r={device:{name:"$detector_device",type:"$detector_type"},os:{name:"$detector_os",version:"$detector_os_version"},browser:{name:"$detector_browser",version:"$detector_browser_version"},engine:{name:"$detector_engine",version:"$detector_engine_version"},app:{name:"$detector_app",version:"$detector_app_version"}};a.detect=function(e){e=e||{};e.ua=e.ua||"";var a=e.ua.toLowerCase();var o={};for(var r=0;r<t.length;r++){var i=t[r].name.replace("$detector_","");var n=o[i]={};var l;var s=l=-1;var b="";for(var p=0;p<t[r].greedyValue.length;p++){var d=t[r].greedyValue[p];s=a.indexOf(d);if(s!==-1){if(l===-1){l=s;b=d}else if(l>s){l=s;b=d}}}var m;var u=m=-1;var c="";var w="";var h="";for(var g in t[r].ruleValue){if(t[r].greedyValue.indexOf(g)<0){u=a.lastIndexOf(g);if(m<=u&&u>=0){if(m===u&&h.length>g.length){}else{m=u;h=g;c=t[r].ruleValue[g];w=g}}}}var v=0;if(l>-1){if(m>-1){v=m;n.name=c;n.match=w}else{v=l;n.name=t[r].ruleValue[b]||b;n.match=b}}else{v=m;n.name=c;n.match=w}if(i!=="type"&&n.name){var y=a.substr(v+n.match.length);var f=/^[\/|\s]*?(\d+[\w|\.|_|-]+)[)|;|\s]*/;var k=f.exec(y);if(k){n.version=k[1].replace(/_/g,".")}else{n.version=""}}if(!n.name){n.name=t[r].defaultValue;n.version=""}}o.device.type=o.type.name;delete o.device.version;delete o.browser.match;delete o.os.match;delete o.app.match;delete o.engine.match;delete o.device.match;delete o.type.match;return o};o.exports=a.detect({ua:navigator.userAgent})});define("mui/app-download-popup/util",function(e,t,i){i.exports={"isMatchUA":function(e,t){var i=(t||"").split("|"),o=!1;return i.forEach(function(t){t=t.trim(),t&&e.indexOf(t)!==-1&&(o=!0)}),o},"parseBoolean":function(e){var t=!1;try{t=JSON.parse(e)}catch(i){}return t},"mmstat":function(e,t){if(e){var i=new Image;i.src="//gm.mmstat.com/"+e+"?mmstat="+t+"&t="+ +new Date}},"getParam":function(){var e={},t=location.search.slice(1).split("&");if(t.length)for(var i=0;i<t.length;i++)if(t[i]&&t[i].indexOf("=")!=-1){var o=t[i].split("=");e[o[0]]=o[1]}return e}}});