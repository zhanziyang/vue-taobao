define("mui/zepto/touch",["mui/zepto/zepto","mui/zepto/event"],function(e,t,n){var i=e("mui/zepto/zepto");e("mui/zepto/event");!function(e){function t(e,t,n,i){return Math.abs(e-t)>=Math.abs(n-i)?e-t>0?"Left":"Right":n-i>0?"Up":"Down"}function n(){f=null,l.last&&(l.el.trigger("longTap"),l={})}function i(){f&&clearTimeout(f),f=null}function o(){s&&clearTimeout(s),a&&clearTimeout(a),c&&clearTimeout(c),f&&clearTimeout(f),s=a=c=f=null,l={}}function r(e){return("touch"==e.pointerType||e.pointerType==e.MSPOINTER_TYPE_TOUCH)&&e.isPrimary}function u(e,t){return e.type=="pointer"+t||e.type.toLowerCase()=="mspointer"+t}var s,a,c,f,p,l={},d=750;e(document).ready(function(){var h,m,g,v,y=0,z=0;"MSGesture"in window&&(p=new MSGesture,p.target=document.body),e(document).bind("MSGestureEnd",function(e){var t=e.velocityX>1?"Right":e.velocityX<-1?"Left":e.velocityY>1?"Down":e.velocityY<-1?"Up":null;t&&(l.el.trigger("swipe"),l.el.trigger("swipe"+t))}).on("touchstart MSPointerDown pointerdown",function(t){(v=u(t,"down"))&&!r(t)||(g=v?t:t.touches[0],t.touches&&1===t.touches.length&&l.x2&&(l.x2=void 0,l.y2=void 0),h=Date.now(),m=h-(l.last||h),l.el=e("tagName"in g.target?g.target:g.target.parentNode),s&&clearTimeout(s),l.x1=g.pageX,l.y1=g.pageY,m>0&&m<=250&&(l.isDoubleTap=!0),l.last=h,f=setTimeout(n,d),p&&v&&p.addPointer(t.pointerId))}).on("touchmove MSPointerMove pointermove",function(e){(v=u(e,"move"))&&!r(e)||(g=v?e:e.touches[0],i(),l.x2=g.pageX,l.y2=g.pageY,y+=Math.abs(l.x1-l.x2),z+=Math.abs(l.y1-l.y2))}).on("touchend MSPointerUp pointerup",function(n){(v=u(n,"up"))&&!r(n)||(i(),l.x2&&Math.abs(l.x1-l.x2)>30||l.y2&&Math.abs(l.y1-l.y2)>30?c=setTimeout(function(){l.el&&(l.el.trigger("swipe"),l.el.trigger("swipe"+t(l.x1,l.x2,l.y1,l.y2))),l={}},0):"last"in l&&(y<30&&z<30?a=setTimeout(function(){var t=e.Event("tap");t.cancelTouch=o,l.el&&l.el.trigger(t),l.isDoubleTap?(l.el&&l.el.trigger("doubleTap"),l={}):s=setTimeout(function(){s=null,l.el&&l.el.trigger("singleTap"),l={}},250)},0):l={}),y=z=0)}).on("touchcancel MSPointerCancel pointercancel",o),e(window).on("scroll",o)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.on(t,e)}})}(i),n.exports=i});